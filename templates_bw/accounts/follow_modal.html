{% extends "base.html" %}

{% load bw_templatetags %}
{% load display_user %}
{% load util %}

{% block content %}
    <div class="container bw-followers__main">
        <div class="bw-followers__close v-spacing-top-4">
            <a href="">{% bw_icon 'close' %}</a>
        </div>
        {% comment %}
        <div class="bw-nav__followers v-spacing-top-5">
            <ol>
                <li class="{% if page == 'followers' %}active{% endif %}"><a href="">Followers</a></li>
                <li class="{% if page == 'following' %}active{% endif %}"><a href="">Following</a></li>
                <li class="{% if page == 'tags' %}active{% endif %}"><a href="">Tags following</a></li>
            </ol>
        </div>
        {% endcomment %}
        <div class="col-8 offset-2 v-spacing-top-6">
            {% if page == 'followers' %}
                <div class="v-spacing-5 text-center">
                    <h5>{{ user.username }}'s followers</h5>
                </div>
                {% for user in followers %}
                    {% display_user_follow_lists user %}
                    <div class="padding-left-3">
                        <div class="col-md-11 offset-1 v-spacing-top-3 v-spacing-3 divider-light"></div>
                    </div>
                {% empty %}
                    <div class="text-center">
                        <h5>No followers... &#128543</h5>
                        <div class="text-grey v-spacing-top-1">Looks like {{ user.username }} has no followers yet</div>
                    </div>
                {% endfor %}

            {% elif page == 'following' %}
                <div class="v-spacing-5 text-center">
                    <h5>Users followed by {{ user.username }}</h5>
                </div>
                {% for user in following %}
                    {% display_user_follow_lists user %}
                    <div class="padding-left-3">
                        <div class="col-md-11 offset-1 v-spacing-top-3 v-spacing-3 divider-light"></div>
                    </div>
                {% empty %}
                    <div class="text-center">
                        <h5>No users followed... &#128543</h5>
                        <div class="text-grey v-spacing-top-1">Looks like {{ user.username }} is not following any users yet</div>
                    </div>
                {% endfor %}

            {% elif page == 'tags' %}
                <div class="v-spacing-5 text-center">
                    <h5>Tags followed by {{ user.username }}</h5>
                </div>
                {% for space_tags, slash_tags, split_tags in following_tags %}
                    <div class="row bw-follows middle">
                        <div class="col-md-8">
                            {% if split_tags|length > 1 %}
                                <div class="border-light-grey-bottom-hover cursor-pointer" style="display: inline-block" onclick="location.href='{% url "tags" slash_tags %}'">
                                    {% for tag in split_tags %}
                                        {% bw_tag tag 1 'v-spacing-top-1' %}
                                    {% endfor %}
                                </div>
                            {% else %}
                                {% bw_tag split_tags.0 %}
                            {% endif %}
                        </div>
                        <div class="col-md-4 text-right">
                            {% if request.user|user_following_tags:slash_tags %}
                                <a class="no-hover" href="{% url 'unfollow-tags' slash_tags %}?next={{ next_path }}"><button class="btn-primary">Unfollow</button></a>
                            {% else %}
                                <a class="no-hover" href="{% url 'follow-tags' slash_tags %}?next={{ next_path }}"><button class="btn-inverse btn-profile-adapt">Follow</button></a>
                            {% endif %}
                        </div>
                    </div>
                    <div class="padding-left-3">
                        <div class="col-md-11 offset-1 v-spacing-top-3 v-spacing-3 divider-light"></div>
                    </div>
                {% empty %}
                    <div class="text-center">
                        <h5>No tags followed... &#128543</h5>
                        <div class="text-grey v-spacing-top-1">Looks like {{ user.username }} is not following any tags yet</div>
                    </div>
                {% endfor %}
            {% endif %}
        </div>
    </div>
{% endblock %}