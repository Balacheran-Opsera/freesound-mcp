{% load cache %}
{% load util %}
{% load display_sound %}
{% load bw_templatetags %}

{% if size == 'small' %}
    <div class="v-spacing-3 overfow-hidden">
        <div class="bw-carousel-container">
            <div class="bw-carousel-wrapper">
                <div class="bw-carousel with-dots dots-distance-02">
                    {% for sound_data in pack.selected_sounds_data %}
                        <div>
                            {% display_sound_small_no_sound_object sound_data %}
                        </div>
                    {% empty %}
                        <div class="bw-player-small-thumbnail-empty-space"></div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <h5 class="ellipsis line-height-percentage-150 v-spacing-top-1">
            <a class="bw-link--black" href="{% url "pack" pack.user.username pack.id %}" >{{ pack.name }}</a>
        </h5>
        <div class="overflow-hidden">
            <a href="{% url "account" pack.user.username %}">{{ pack.user.username|truncate_string:15 }}</a> <span class="text-grey h-spacing-left-1 h-spacing-1">Â·</span><span class="text-grey">{{ pack.num_sounds }} sound{{ pack.num_sounds|pluralize }}</span>
            <br><span class="text-grey">{{ pack.created|timesince }} ago</span>
        </div>
        {% if pack.description %}
            <div class="v-spacing-top-1 text-grey overflow-hidden" style="height:52px;">
                {{ pack.description|striptags|safe|truncatechars_html:55 }}
            </div>
        {% endif %}
    </div>
{% elif size == 'big' %}
    <div>
        {% if pack.selected_sounds_data %}
        <div class="row no-margins" style="margin-left: -15px">
            {% for sound_data in pack.selected_sounds_data %}
                <div class="col-4">
                    {% display_sound_small_no_sound_object sound_data %}
                </div>
            {% endfor %}
        </div>
        {% else %}
            <div class="bw-player-small-thumbnail-empty-space"></div>
        {% endif %}
        <h5 class="v-spacing-top-1">
            <span class="text-light-grey">Pack: </span><a class="bw-link--black ellipsis" href="{% url "pack" pack.user.username pack.id %}" >{{ pack.name }}</a>
        </h5>
        {% if pack.description %}
            <div class="text-black v-spacing-top-1">{{ pack.description|striptags|safe|truncatewords_html:20 }}</div>
        {% endif %}
        {% with pack.get_pack_tags_bw as tags %}
            {% if tags %}
                <div class=" v-spacing-top-1">
                {% for tag in tags|slice:":5" %}
                    {% bw_tag tag.name 1 '' tag.browse_url %}
                {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        <div class="between middle v-spacing-top-1 v-spacing-2">
            <div class="">
                <div class="middle text-grey h-spacing-1">
                    <div class="h-spacing-1">
                        {% bw_user_avatar pack.user_profile_locations.avatar.S.url pack.user.username 32 %}
                    </div>
                    <a href="{% url 'account' pack.user %}">{{ pack.user | truncate_string:15 }}</a>
                    <span class="h-spacing-left-1 text-light-grey">{{ pack.created|date:"F jS, Y" }}</span>
                </div>
            </div>
            <div class="text-light-grey right">
                <div title="{{ pack.num_sounds }} sound{{ pack.num_sounds|pluralize }}">
                    <a href="{% url 'sounds-search' %}?f=grouping_pack:%22{{ pack.id }}_{{ pack.name }}%22&s=Date+added+(newest+first)&g=1" class="bw-link--grey-light">
                        <span class="bw-icon-wave"></span> {{ pack.num_sounds }}
                    </a>
                </div>
                <div class="h-spacing-left-2" title="{{ pack.num_downloads }} download{{ pack.num_downloads|pluralize }}">
                    <a href="{% url 'pack-downloaders' pack.user.username pack.id %}" class="bw-link--grey-light">
                        <span class="bw-icon-download"></span> {{ pack.num_downloads }}
                    </a>
                </div>
                <div class="h-spacing-left-2" title="License: {{ pack.license_summary_name_and_id.0 }}">
                    <span class="bw-icon-{{ pack.license_bw_icon_name }}"></span>
                    <span class="d-none d-lg-inline"> {{ pack.license_summary_name_and_id.0 }}</span>
                </div>
            </div>
        </div>
    </div>
{% endif %}
